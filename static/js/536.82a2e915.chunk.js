"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[536],{536:(e,t,r)=>{r.r(t),r.d(t,{Route:()=>g});var s=r(614),a=r(359),n=r(3),l=r(490),i=r(554),c=r(892),x=r(43),m=r(665),o=r(437);const d={name:"",phone:"",surname:""},p=()=>{const[e,t]=(0,x.useState)(d),r=(0,o.Z)(),s=m.z.object({name:m.z.string().min(1,{message:"Name is required"}),surname:m.z.string().min(1,{message:"Surname is required"}),phone:m.z.string().regex(/^\+?\d[\d\s-]{8,14}$/,{message:"Invalid phone number"})}).required(),a=(0,n.wA)();return{onSubmit:e=>{e.preventDefault(),t(d);const n=e.target,l=n.elements.namedItem("name"),i=n.elements.namedItem("surname"),x=n.elements.namedItem("phone"),m=l.value.trim(),o=i.value.trim(),p=x.value.trim(),h=(r=>{try{return s.parse(r),!0}catch(e){const s={name:"",surname:"",phone:""};return e.issues.forEach((e=>{const t=e.path[0],r=e.message;s[t]=r})),t(s),!1}})({name:m,surname:o,phone:p});if(!h)return;const u={name:m,surname:o,phone:p};console.log(u),localStorage.removeItem("cart"),a((0,c.sX)()),r({to:"/thanks"})},errors:e}};var h=r(579);const u=()=>{const{onSubmit:e,errors:t}=p();return(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:(0,a.QP)("mb-[16px] font-bold","text-[2rem] leading-[1.4]","tablet:text-[2.2rem]"),children:"Create your order"}),(0,h.jsxs)("form",{className:"flex flex-col gap-[16px]",id:"cart-form",onSubmit:e,children:[(0,h.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,h.jsx)("label",{htmlFor:"name",children:"Name"}),(0,h.jsx)("input",{placeholder:"Name",type:"text",id:"name",className:"border-[1px] border-light-01 px-[8px] py-[4px]"}),t.name&&(0,h.jsx)("p",{children:t.name})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,h.jsx)("label",{htmlFor:"surname",children:"Surname"}),(0,h.jsx)("input",{placeholder:"Surname",type:"text",id:"surname",className:"border-[1px] border-light-01 px-[8px] py-[4px]"}),t.surname&&(0,h.jsx)("p",{children:t.surname})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,h.jsx)("label",{htmlFor:"phone",children:"Phone"}),(0,h.jsx)("input",{placeholder:"Phone",type:"number",id:"phone",className:"border-[1px] border-light-01 px-[8px] py-[4px]"}),t.phone&&(0,h.jsx)("p",{children:t.phone})]}),(0,h.jsx)("button",{type:"submit",className:"w-full bg-dark-01 px-[8px] py-[12px] text-white hover:shadow-left-shadow-black-button ease-linear transition-all",children:"Create order"})]})]})},f=()=>{const e=(0,n.d4)((e=>e.cart.cart)),t=(0,n.d4)((e=>e.products.currency)),r=(0,n.wA)(),s=t=>{const{id:s}=t.target,a=e.map((e=>e._id!==s?e:{...e,quantity:e.quantity+1}));localStorage.setItem("cart",JSON.stringify(a)),r((0,c.Om)({type:"plus",id:s}))},x=t=>{const{id:s}=t.target;r((0,c.Om)({type:"minus",id:s}));const a=e.map((e=>e._id!==s?e:{...e,quantity:e.quantity-1})).filter((e=>(null===e||void 0===e?void 0:e.quantity)>0));e.map((e=>e._id)).includes(s)||localStorage.setItem("cart",JSON.stringify(e.filter((e=>e._id!==s)))),localStorage.setItem("cart",JSON.stringify(a))};return(0,h.jsx)(i.w,{children:(0,h.jsxs)(l.m,{children:[(0,h.jsx)("h2",{className:(0,a.QP)("mb-[20px] font-bold","text-[3.4rem] leading-[1.2]","tablet:text-[4.6rem]"),children:"Cart"}),e.length>0?(0,h.jsxs)("div",{className:"flex gap-[28px] flex-col tablet-vertical:flex-row",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-[20px] grow",children:[(0,h.jsx)("ul",{className:"flex flex-col gap-[20px]",children:e.map((e=>(0,h.jsxs)("li",{className:"bg-light-04 px-[16px] py-[20px] flex justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{children:e.title}),(0,h.jsxs)("span",{children:[e.price," ",e.currency]})]}),(0,h.jsxs)("div",{className:"flex gap-[12px] items-center",children:[(0,h.jsx)("button",{className:"w-[48px] h-[48px] text-white font-bold bg-light-01 flex justify-center items-center hover:bg-white hover:text-dark-01 ease-linear transition-all",onClick:x,id:e._id,children:"-"}),(0,h.jsx)("span",{className:"text-default-text font-bold text-center",children:e.quantity}),(0,h.jsx)("button",{className:"w-[48px] h-[48px] text-white font-bold bg-light-01 flex justify-center items-center hover:bg-white hover:text-dark-01 ease-linear transition-all",onClick:s,id:e._id,children:"+"})]})]},e._id)))}),e.length>0&&(0,h.jsxs)("p",{className:(0,a.QP)("text-[2rem] leading-[1.4]","tablet:text-[2.2rem]"),children:["Total:"," ",e.reduce(((e,t)=>e+=t.quantity*t.price),0)," ",t]})]}),(0,h.jsx)(u,{})]}):(0,h.jsx)("div",{className:"flex justify-center items-center h-[300px]",children:(0,h.jsx)("p",{className:(0,a.QP)("text-[2rem] leading-[1.4]","tablet:text-[2.2rem]"),children:"No items in your cart"})})]})})},g=(0,s.uV)("/cart")({component:function(){return(0,h.jsx)("main",{children:(0,h.jsx)(f,{})})}})},554:(e,t,r)=>{r.d(t,{w:()=>n});var s=r(359),a=r(579);const n=e=>(0,a.jsx)("section",{className:(0,s.QP)("tablet:py-[100px] py-[36px] flex flex-col",e.className),children:e.children})}}]);
//# sourceMappingURL=536.82a2e915.chunk.js.map